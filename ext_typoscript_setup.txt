config.tx_extbase {
	persistence {
		classes {
			Webfox\T3events\Domain\Model\Performance {
				subclasses {
					Tx_T3eventsReservation_Schedule = CPSIT\T3eventsReservation\Domain\Model\Schedule
				}
			}
			CPSIT\T3eventsReservation\Domain\Model\Schedule {
				mapping {
					tableName = tx_t3events_domain_model_performance
					recordType = Tx_T3eventsReservation_Schedule
				}
			}
			CPSIT\T3eventsReservation\Domain\Model\Contact {
				subclasses {
					Tx_T3eventsReservation_Person = CPSIT\T3eventsReservation\Domain\Model\Person
				}
			}
			Webfox\T3events\Domain\Model\Person {
				subclasses {
					Tx_T3eventsReservation_Person = CPSIT\T3eventsReservation\Domain\Model\Person
				}
			}
			CPSIT\T3eventsReservation\Domain\Model\Person {
				mapping {
					tableName = tx_t3events_domain_model_person
					recordType = Tx_T3eventsReservation_Person
				}
			}
			CPSIT\T3eventsReservation\Domain\Model\Notification {
				mapping {
					tableName = tx_t3events_domain_model_notification
				}
			}
			CPSIT\T3eventsReservation\Domain\Model\Contact {
				mapping {
					tableName = tx_t3events_domain_model_person
					recordType = Tx_T3eventsReservation_Person
				}
			}
		}
	}
}

# Module configuration
module.tx_t3eventreservation {
	persistence {
		storagePid = {$module.tx_t3eventsreservation.persistence.storagePid}
	}

	view {
		#templateRootPaths.0 = {$module.tx_t3eventsreservation.view.templateRootPaths.0}
		partialRootPaths.0 = {$module.tx_t3eventsreservation.view.partialRootPaths.0}
		layoutRootPaths.0 = {$module.tx_t3eventsreservation.view.layoutRootPaths.0}
	}

	settings {
		lesson {
			list {
				period = futureOnly
			}
		}

		participant {
			download {
				fileName = teilnehmer
			}

			list {
				lessonPeriod = futureOnly
			}
		}

		bookings {
			list {
				period = futureOnly
				order = lesson.date|asc,lesson.uid|desc
			}

			cancel {
				byDakosy {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_t3eventsreservation.settings.reservation.default.fromEmail}
						subject = DAKOSY - Ihr Schulungstermin wurde abgesagt
						templateFileName = ByDakosy
					}
				}

				withCosts {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_t3eventsreservation.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung kostenpflichtig storniert
						templateFileName = WithCosts
					}
				}

				noCharge {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_t3eventsreservation.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung kostenfrei storniert
						templateFileName = NoCharge
					}
				}
			}

			removeParticipant {
				byDakosy {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_t3eventsreservation.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung für einen Teilnehmer storniert
						templateFileName = ByDakosy
					}
				}

				withCosts {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_t3eventsreservation.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung für einen Teilnehmer kostenpflichtig storniert
						templateFileName = WithCosts
					}
				}

				noCharge {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_t3eventsreservation.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung für einen Teilnehmer kostenfrei storniert
						templateFileName = NoCharge
					}
				}
			}

			notify {
				fromEmail = {$plugin.tx_t3eventscourse.settings.reservation.default.fromEmail}
			}
		}
	}
}
